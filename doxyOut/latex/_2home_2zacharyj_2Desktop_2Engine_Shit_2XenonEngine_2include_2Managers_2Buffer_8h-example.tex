\doxysection{/home/zacharyj/\+Desktop/\+Engine\+\_\+\+Shit/\+Xenon\+Engine/include/\+Managers/\+Buffer.\+h}
\hypertarget{_2home_2zacharyj_2Desktop_2Engine_Shit_2XenonEngine_2include_2Managers_2Buffer_8h-example}{}\label{_2home_2zacharyj_2Desktop_2Engine_Shit_2XenonEngine_2include_2Managers_2Buffer_8h-example}
\begin{DoxyCodeInclude}{0}
\DoxyCodeLine{\textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{\textcolor{preprocessor}{\#ifndef\ BUFFER\_H}}
\DoxyCodeLine{\textcolor{preprocessor}{\#define\ BUFFER\_H}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{config_8h}{Utils/config.h}}"{}}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{Vertex_8h}{Managers/Vertex.h}}"{}}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//Forward\ declarations}}
\DoxyCodeLine{\textcolor{keyword}{struct\ }\mbox{\hyperlink{structVertex}{Vertex}};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{enum}\ \mbox{\hyperlink{Buffer_8h_a73dbf406a20494ceff85b75994bc62ab}{BufferErrors}}\ :\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}\ \{}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{Buffer_8h_a73dbf406a20494ceff85b75994bc62abaabc8120c05a7354de18c0c5bf861b9d2}{BUF\_ERROR\_NONE}}\ =\ 0,}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{Buffer_8h_a73dbf406a20494ceff85b75994bc62aba9ea76cd76e1a73f12a0cd1bcb57a9fe4}{BUF\_ERROR\_CREATION}}\ =\ 0b0000000000000001,}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{Buffer_8h_a73dbf406a20494ceff85b75994bc62aba33a5cd855774a66c1b266edb0ddf9ccf}{BUF\_ERROR\_ALLOCATION}}\ =\ 0b0000000000000010,}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{Buffer_8h_a73dbf406a20494ceff85b75994bc62aba3d1160099301ed841c19128ff44b7518}{BUF\_ERROR\_COPY}}\ =\ 0b0000000000000100,\ }
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{Buffer_8h_a73dbf406a20494ceff85b75994bc62abad55d59e58df72f63fafb7c0e8902bf02}{BUF\_ERROR\_BIND}}\ =\ 0b0000000000001000,}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{Buffer_8h_a73dbf406a20494ceff85b75994bc62aba740507564179755e9d47d97b26488e73}{BUF\_ERROR\_TYPE}}\ =\ 0b0000000000010000}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{enum\ class}\ \mbox{\hyperlink{Buffer_8h_adf8e136713c0691010d2bec6ba63e9cf}{BufferType}}\ \{}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{Buffer_8h_adf8e136713c0691010d2bec6ba63e9cfa0c3e47aef93a7f244f41ab309a33634b}{VERTEX}},}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{Buffer_8h_adf8e136713c0691010d2bec6ba63e9cfacb4ae3b37047fb4b2c0d16f8bf84f076}{INDEX}},}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{Buffer_8h_adf8e136713c0691010d2bec6ba63e9cfa34cc6bcb0c518fff5c316841d9185593}{VERTEX\_STAGING}},}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{Buffer_8h_adf8e136713c0691010d2bec6ba63e9cfad1162b6c491a4e3bfcf95d16c37c843f}{INDEX\_STAGING}},}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{Buffer_8h_adf8e136713c0691010d2bec6ba63e9cfa891f35a29c3d51d02ffd42dd6dcc69b2}{UNIFORM}},}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{Buffer_8h_adf8e136713c0691010d2bec6ba63e9cfac942dc2a9f958acddc67e11472d3ca0b}{GENERIC}},}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{Buffer_8h_adf8e136713c0691010d2bec6ba63e9cfa3ca2e8c24998b2cdd1ec3d2b6bd8cbae}{GENERIC\_STAGING}},}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{Buffer_8h_adf8e136713c0691010d2bec6ba63e9cfa754a5d433173b5ddc7debc2110ac575f}{STORAGE}}}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{class\ }\mbox{\hyperlink{classBuffer}{Buffer}}\ \{}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{public}:\ }
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{classBuffer_a588ba459a853c3cd618cb52f7eb0650e}{Buffer}}(\mbox{\hyperlink{Buffer_8h_adf8e136713c0691010d2bec6ba63e9cf}{BufferType}}\ type,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ std::string\&\ name,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ VkDeviceSize\ size,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ VkDevice\ logicalDevice,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ VkPhysicalDevice\ physicalDevice,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ std::optional<std::vector<Vertex>>\ vertices,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ std::optional<std::vector<uint32\_t>>\ indices);}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classBuffer_a5f4eaf122e5e4763de3f42fa81d85952}{cleanup}}()\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}Calling\ Buffer::cleanup()\ for\ handle:\ "{}}\ <<\ buf\_handle\ <<\ std::endl;}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{comment}{//\ Clean\ up\ buffer\ memory\ if\ allocated}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (buf\_memory\ !=\ VK\_NULL\_HANDLE)\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ vkFreeMemory(buf\_logicalDevice,\ buf\_memory,\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ buf\_memory\ =\ VK\_NULL\_HANDLE;}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}Buffer\ memory\ freed"{}}\ <<\ std::endl;}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{comment}{//\ Destroy\ the\ buffer\ if\ it's\ created}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (buf\_handle\ !=\ VK\_NULL\_HANDLE)\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ vkDestroyBuffer(buf\_logicalDevice,\ buf\_handle,\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ buf\_handle\ =\ VK\_NULL\_HANDLE;}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}Buffer\ destroyed"{}}\ <<\ std::endl;}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classBuffer_ab3e8b8af2d46e7cef95e83397a547b95}{allocateAndBindBuffer}}(}
\DoxyCodeLine{\ \ \ \ \ \ \ \ VkDevice\ device,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ VkPhysicalDevice\ physicalDevice,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ VkDeviceSize\ size,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ VkBufferUsageFlags\ usage,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ VkMemoryPropertyFlags\ properties}
\DoxyCodeLine{\ \ \ \ );}
\DoxyCodeLine{\ \ \ \ }
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classBuffer_ad063bcb64081574e2b7b38abe068a498}{createBuffer}}(}
\DoxyCodeLine{\ \ \ \ \ \ \ \ VkDevice\ logicalDevice,\ VkPhysicalDevice\ physicalDevice,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ VkBufferUsageFlags\ usage,\ VkMemoryPropertyFlags\ properties,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ VkDeviceSize\ size}
\DoxyCodeLine{\ \ \ \ );}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classBuffer_aff3a87d8d667b43fd22d9d1e1f5df478}{mapData}}(VkDevice\ logicalDevice,\ VkBufferUsageFlags\ usage,\ VkMemoryPropertyFlags\ properties);}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//Error\ handling\ functions}}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classBuffer_a9def02e2929d4e3b3d056109e32b9828}{hasErrors}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ buf\_errors\ !=\ \mbox{\hyperlink{Buffer_8h_a73dbf406a20494ceff85b75994bc62abaabc8120c05a7354de18c0c5bf861b9d2}{BUF\_ERROR\_NONE}};\ \};}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classBuffer_a5a5fbeeae23aee7a4391056ce51825d7}{setError}}(\mbox{\hyperlink{Buffer_8h_a73dbf406a20494ceff85b75994bc62ab}{BufferErrors}}\ error)\ \{\ buf\_errors\ |=\ error;\ \};}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classBuffer_ab05693d35516a66a413a5d3d945dead2}{printErrors}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//Getter\ functions\ }}
\DoxyCodeLine{\ \ \ \ VkBuffer\ \mbox{\hyperlink{classBuffer_ac86ead6fa554146ad8288fc7cf0a28da}{getHandle}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ buf\_handle;\ \};}
\DoxyCodeLine{\ \ \ \ VkDeviceMemory\ \mbox{\hyperlink{classBuffer_a8395fbd22c48e648c4d568f2e195db65}{getMemory}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ buf\_memory;\ \};}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//This\ function\ gets\ the\ data\ within\ a\ buffer,\ either\ vertices\ or\ indices(for\ now)}}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{\ \ \ \ std::vector<T>\ \mbox{\hyperlink{classBuffer_a0f3e239ec3f6c817e14ac6ef149aeeab}{getData}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{private}:\ }
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//Injected\ vulkan\ components\ -\/\ for\ internal\ method\ use}}
\DoxyCodeLine{\ \ \ \ VkDevice\ buf\_logicalDevice;}
\DoxyCodeLine{\ \ \ \ VkPhysicalDevice\ buf\_physicalDevice;}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//Buffer\ info}}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{Buffer_8h_adf8e136713c0691010d2bec6ba63e9cf}{BufferType}}\ buf\_type\ =\ \mbox{\hyperlink{Buffer_8h_adf8e136713c0691010d2bec6ba63e9cfac942dc2a9f958acddc67e11472d3ca0b}{BufferType::GENERIC}};}
\DoxyCodeLine{\ \ \ \ std::string\ buf\_name;}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ VkDeviceSize\ buf\_size;\ }
\DoxyCodeLine{\ \ \ \ VkBuffer\ buf\_handle\ =\ VK\_NULL\_HANDLE;}
\DoxyCodeLine{\ \ \ \ VkDeviceMemory\ buf\_memory\ =\ VK\_NULL\_HANDLE;}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}\ buf\_errors\ =\ \mbox{\hyperlink{Buffer_8h_a73dbf406a20494ceff85b75994bc62abaabc8120c05a7354de18c0c5bf861b9d2}{BUF\_ERROR\_NONE}};}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//Optional\ data}}
\DoxyCodeLine{\ \ \ \ std::optional<std::vector<Vertex>>\ buf\_vertices;}
\DoxyCodeLine{\ \ \ \ std::optional<std::vector<uint32\_t>>\ buf\_indices;}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\#endif}}

\end{DoxyCodeInclude}
 