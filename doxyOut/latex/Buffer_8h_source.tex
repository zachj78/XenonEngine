\doxysection{Buffer.\+h}
\hypertarget{Buffer_8h_source}{}\label{Buffer_8h_source}\index{Buffer.h@{Buffer.h}}
\mbox{\hyperlink{Buffer_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#ifndef\ BUFFER\_H}}
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#define\ BUFFER\_H}}
\DoxyCodeLine{00004\ }
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{config_8h}{Utils/config.h}}"{}}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{Vertex_8h}{Managers/Vertex.h}}"{}}}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \textcolor{comment}{//Forward\ declarations}}
\DoxyCodeLine{00009\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structVertex}{Vertex}};}
\DoxyCodeLine{00010\ }
\DoxyCodeLine{00011\ \textcolor{keyword}{enum}\ \mbox{\hyperlink{Buffer_8h_a73dbf406a20494ceff85b75994bc62ab}{BufferErrors}}\ :\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}\ \{}
\DoxyCodeLine{00012\ \ \ \ \ \mbox{\hyperlink{Buffer_8h_a73dbf406a20494ceff85b75994bc62abaabc8120c05a7354de18c0c5bf861b9d2}{BUF\_ERROR\_NONE}}\ =\ 0,}
\DoxyCodeLine{00013\ \ \ \ \ \mbox{\hyperlink{Buffer_8h_a73dbf406a20494ceff85b75994bc62aba9ea76cd76e1a73f12a0cd1bcb57a9fe4}{BUF\_ERROR\_CREATION}}\ =\ 0b0000000000000001,}
\DoxyCodeLine{00014\ \ \ \ \ \mbox{\hyperlink{Buffer_8h_a73dbf406a20494ceff85b75994bc62aba33a5cd855774a66c1b266edb0ddf9ccf}{BUF\_ERROR\_ALLOCATION}}\ =\ 0b0000000000000010,}
\DoxyCodeLine{00015\ \ \ \ \ \mbox{\hyperlink{Buffer_8h_a73dbf406a20494ceff85b75994bc62aba3d1160099301ed841c19128ff44b7518}{BUF\_ERROR\_COPY}}\ =\ 0b0000000000000100,\ }
\DoxyCodeLine{00016\ \ \ \ \ \mbox{\hyperlink{Buffer_8h_a73dbf406a20494ceff85b75994bc62abad55d59e58df72f63fafb7c0e8902bf02}{BUF\_ERROR\_BIND}}\ =\ 0b0000000000001000,}
\DoxyCodeLine{00017\ \ \ \ \ \mbox{\hyperlink{Buffer_8h_a73dbf406a20494ceff85b75994bc62aba740507564179755e9d47d97b26488e73}{BUF\_ERROR\_TYPE}}\ =\ 0b0000000000010000}
\DoxyCodeLine{00018\ \};}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \textcolor{keyword}{enum\ class}\ \mbox{\hyperlink{Buffer_8h_adf8e136713c0691010d2bec6ba63e9cf}{BufferType}}\ \{}
\DoxyCodeLine{00021\ \ \ \ \ \mbox{\hyperlink{Buffer_8h_adf8e136713c0691010d2bec6ba63e9cfa0c3e47aef93a7f244f41ab309a33634b}{VERTEX}},}
\DoxyCodeLine{00022\ \ \ \ \ \mbox{\hyperlink{Buffer_8h_adf8e136713c0691010d2bec6ba63e9cfacb4ae3b37047fb4b2c0d16f8bf84f076}{INDEX}},}
\DoxyCodeLine{00023\ \ \ \ \ \mbox{\hyperlink{Buffer_8h_adf8e136713c0691010d2bec6ba63e9cfa34cc6bcb0c518fff5c316841d9185593}{VERTEX\_STAGING}},}
\DoxyCodeLine{00024\ \ \ \ \ \mbox{\hyperlink{Buffer_8h_adf8e136713c0691010d2bec6ba63e9cfad1162b6c491a4e3bfcf95d16c37c843f}{INDEX\_STAGING}},}
\DoxyCodeLine{00025\ \ \ \ \ \mbox{\hyperlink{Buffer_8h_adf8e136713c0691010d2bec6ba63e9cfa891f35a29c3d51d02ffd42dd6dcc69b2}{UNIFORM}},}
\DoxyCodeLine{00026\ \ \ \ \ \mbox{\hyperlink{Buffer_8h_adf8e136713c0691010d2bec6ba63e9cfac942dc2a9f958acddc67e11472d3ca0b}{GENERIC}},}
\DoxyCodeLine{00027\ \ \ \ \ \mbox{\hyperlink{Buffer_8h_adf8e136713c0691010d2bec6ba63e9cfa3ca2e8c24998b2cdd1ec3d2b6bd8cbae}{GENERIC\_STAGING}},}
\DoxyCodeLine{00028\ \ \ \ \ \mbox{\hyperlink{Buffer_8h_adf8e136713c0691010d2bec6ba63e9cfa754a5d433173b5ddc7debc2110ac575f}{STORAGE}}}
\DoxyCodeLine{00029\ \};}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00049\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classBuffer_a588ba459a853c3cd618cb52f7eb0650e}{Buffer}}\ \{}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00051\ \textcolor{keyword}{public}:\ }
\DoxyCodeLine{00052\ \ \ \ \ \mbox{\hyperlink{classBuffer_a588ba459a853c3cd618cb52f7eb0650e}{Buffer}}(\mbox{\hyperlink{Buffer_8h_adf8e136713c0691010d2bec6ba63e9cf}{BufferType}}\ type,}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ std::string\&\ name,}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ VkDeviceSize\ size,}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ VkDevice\ logicalDevice,}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ VkPhysicalDevice\ physicalDevice,}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ std::optional<std::vector<Vertex>>\ vertices,}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ std::optional<std::vector<uint32\_t>>\ indices);}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00060\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classBuffer_a5f4eaf122e5e4763de3f42fa81d85952}{cleanup}}()\ \{}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}Calling\ Buffer::cleanup()\ for\ handle:\ "{}}\ <<\ buf\_handle\ <<\ std::endl;}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Clean\ up\ buffer\ memory\ if\ allocated}}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (buf\_memory\ !=\ VK\_NULL\_HANDLE)\ \{}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \ \ \ \ vkFreeMemory(buf\_logicalDevice,\ buf\_memory,\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \ \ \ \ buf\_memory\ =\ VK\_NULL\_HANDLE;}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}Buffer\ memory\ freed"{}}\ <<\ std::endl;}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00069\ }
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Destroy\ the\ buffer\ if\ it's\ created}}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (buf\_handle\ !=\ VK\_NULL\_HANDLE)\ \{}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \ \ \ \ vkDestroyBuffer(buf\_logicalDevice,\ buf\_handle,\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \ \ \ \ buf\_handle\ =\ VK\_NULL\_HANDLE;}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}Buffer\ destroyed"{}}\ <<\ std::endl;}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00076\ \ \ \ \ \}}
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00078\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classBuffer_ab3e8b8af2d46e7cef95e83397a547b95}{allocateAndBindBuffer}}(}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ VkDevice\ device,}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ VkPhysicalDevice\ physicalDevice,}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ VkDeviceSize\ size,}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ VkBufferUsageFlags\ usage,}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ VkMemoryPropertyFlags\ properties}
\DoxyCodeLine{00084\ \ \ \ \ );}
\DoxyCodeLine{00085\ \ \ \ \ }
\DoxyCodeLine{00086\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classBuffer_ad063bcb64081574e2b7b38abe068a498}{createBuffer}}(}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ VkDevice\ logicalDevice,\ VkPhysicalDevice\ physicalDevice,}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ VkBufferUsageFlags\ usage,\ VkMemoryPropertyFlags\ properties,}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ VkDeviceSize\ size}
\DoxyCodeLine{00090\ \ \ \ \ );}
\DoxyCodeLine{00091\ }
\DoxyCodeLine{00092\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classBuffer_aff3a87d8d667b43fd22d9d1e1f5df478}{mapData}}(VkDevice\ logicalDevice,\ VkBufferUsageFlags\ usage,\ VkMemoryPropertyFlags\ properties);}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00094\ \ \ \ \ \textcolor{comment}{//Error\ handling\ functions}}
\DoxyCodeLine{00095\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classBuffer_a9def02e2929d4e3b3d056109e32b9828}{hasErrors}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ buf\_errors\ !=\ \mbox{\hyperlink{Buffer_8h_a73dbf406a20494ceff85b75994bc62abaabc8120c05a7354de18c0c5bf861b9d2}{BUF\_ERROR\_NONE}};\ \};}
\DoxyCodeLine{00096\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classBuffer_a5a5fbeeae23aee7a4391056ce51825d7}{setError}}(\mbox{\hyperlink{Buffer_8h_a73dbf406a20494ceff85b75994bc62ab}{BufferErrors}}\ error)\ \{\ buf\_errors\ |=\ error;\ \};}
\DoxyCodeLine{00097\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classBuffer_ab05693d35516a66a413a5d3d945dead2}{printErrors}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00098\ }
\DoxyCodeLine{00099\ \ \ \ \ \textcolor{comment}{//Getter\ functions\ }}
\DoxyCodeLine{00100\ \ \ \ \ VkBuffer\ \mbox{\hyperlink{classBuffer_ac86ead6fa554146ad8288fc7cf0a28da}{getHandle}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ buf\_handle;\ \};}
\DoxyCodeLine{00101\ \ \ \ \ VkDeviceMemory\ \mbox{\hyperlink{classBuffer_a8395fbd22c48e648c4d568f2e195db65}{getMemory}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ buf\_memory;\ \};}
\DoxyCodeLine{00102\ }
\DoxyCodeLine{00103\ \ \ \ \ \textcolor{comment}{//This\ function\ gets\ the\ data\ within\ a\ buffer,\ either\ vertices\ or\ indices(for\ now)}}
\DoxyCodeLine{00104\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00105\ \ \ \ \ std::vector<T>\ \mbox{\hyperlink{classBuffer_a0f3e239ec3f6c817e14ac6ef149aeeab}{getData}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00106\ }
\DoxyCodeLine{00107\ \textcolor{keyword}{private}:\ }
\DoxyCodeLine{00108\ \ \ \ \ \textcolor{comment}{//Injected\ vulkan\ components\ -\/\ for\ internal\ method\ use}}
\DoxyCodeLine{00109\ \ \ \ \ VkDevice\ buf\_logicalDevice;}
\DoxyCodeLine{00110\ \ \ \ \ VkPhysicalDevice\ buf\_physicalDevice;}
\DoxyCodeLine{00111\ }
\DoxyCodeLine{00112\ \ \ \ \ \textcolor{comment}{//Buffer\ info}}
\DoxyCodeLine{00113\ \ \ \ \ \mbox{\hyperlink{Buffer_8h_adf8e136713c0691010d2bec6ba63e9cf}{BufferType}}\ buf\_type\ =\ \mbox{\hyperlink{Buffer_8h_adf8e136713c0691010d2bec6ba63e9cfac942dc2a9f958acddc67e11472d3ca0b}{BufferType::GENERIC}};}
\DoxyCodeLine{00114\ \ \ \ \ std::string\ buf\_name;}
\DoxyCodeLine{00115\ }
\DoxyCodeLine{00116\ \ \ \ \ VkDeviceSize\ buf\_size;\ }
\DoxyCodeLine{00117\ \ \ \ \ VkBuffer\ buf\_handle\ =\ VK\_NULL\_HANDLE;}
\DoxyCodeLine{00118\ \ \ \ \ VkDeviceMemory\ buf\_memory\ =\ VK\_NULL\_HANDLE;}
\DoxyCodeLine{00119\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}\ buf\_errors\ =\ \mbox{\hyperlink{Buffer_8h_a73dbf406a20494ceff85b75994bc62abaabc8120c05a7354de18c0c5bf861b9d2}{BUF\_ERROR\_NONE}};}
\DoxyCodeLine{00120\ }
\DoxyCodeLine{00121\ \ \ \ \ \textcolor{comment}{//Optional\ data}}
\DoxyCodeLine{00122\ \ \ \ \ std::optional<std::vector<Vertex>>\ buf\_vertices;}
\DoxyCodeLine{00123\ \ \ \ \ std::optional<std::vector<uint32\_t>>\ buf\_indices;}
\DoxyCodeLine{00124\ \};}
\DoxyCodeLine{00125\ }
\DoxyCodeLine{00126\ \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
