\doxysection{Image.\+h}
\hypertarget{Image_8h_source}{}\label{Image_8h_source}\index{Image.h@{Image.h}}
\mbox{\hyperlink{Image_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once\ }}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#ifndef\ IMAGE\_H}}
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#define\ IMAGE\_H}}
\DoxyCodeLine{00004\ }
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{config_8h}{Utils/config.h}}"{}}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{stb__image_8h}{External/stb\_image.h}}"{}}}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \textcolor{comment}{//Forward\ declarations}}
\DoxyCodeLine{00009\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classBufferManager}{BufferManager}};}
\DoxyCodeLine{00010\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classRenderTargeter}{RenderTargeter}};}
\DoxyCodeLine{00011\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classBuffer}{Buffer}};}
\DoxyCodeLine{00012\ }
\DoxyCodeLine{00013\ \textcolor{comment}{//Holds\ image\ metadata}}
\DoxyCodeLine{00014\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structImageDetails}{ImageDetails}}\ \{}
\DoxyCodeLine{00015\ \ \ \ \ VkImageView\ \mbox{\hyperlink{structImageDetails_a71f73639851eaf5ec8088b4f46444eab}{imageView}}\ =\ VK\_NULL\_HANDLE;}
\DoxyCodeLine{00016\ \ \ \ \ VkFormat\ \mbox{\hyperlink{structImageDetails_a8975335ece6c498ff202839b436b4180}{imageFormat}}\ =\ VK\_FORMAT\_UNDEFINED;}
\DoxyCodeLine{00017\ \ \ \ \ VkImageLayout\ \mbox{\hyperlink{structImageDetails_a3cd6c47e5213951357031cad76627a23}{currentLayout}}\ =\ VK\_IMAGE\_LAYOUT\_UNDEFINED;}
\DoxyCodeLine{00018\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{structImageDetails_afb28f701b501aa5dfdc54cb2795a797d}{imageWidth}}\ =\ 0;}
\DoxyCodeLine{00019\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{structImageDetails_a8347d7a3dab667d3218971b206104d18}{imageHeight}}\ =\ 0;}
\DoxyCodeLine{00020\ \ \ \ \ VkImageAspectFlags\ \mbox{\hyperlink{structImageDetails_a525ee7250e0db8207bcf07139a7c92b5}{imageAspectFlags}}\ =\ 0;}
\DoxyCodeLine{00021\ \};}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \textcolor{keyword}{enum}\ \mbox{\hyperlink{Image_8h_a9ce7003c2ba4ec8cebb8f0c0bb503d64}{ImageErrors}}\ :\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}\ \{}
\DoxyCodeLine{00024\ \ \ \ \ \mbox{\hyperlink{Image_8h_a9ce7003c2ba4ec8cebb8f0c0bb503d64a37b8f5b833b8b9801b9a2e8337cf54cd}{IMG\_ERROR\_NONE}}\ =\ 0,}
\DoxyCodeLine{00025\ \ \ \ \ \mbox{\hyperlink{Image_8h_a9ce7003c2ba4ec8cebb8f0c0bb503d64a7472a2101ff31dd600532c87c7d0e643}{IMG\_ERROR\_CREATION}}\ =\ 0b0000000000000001,}
\DoxyCodeLine{00026\ \ \ \ \ \mbox{\hyperlink{Image_8h_a9ce7003c2ba4ec8cebb8f0c0bb503d64ae4f5570fba729c14df0f1d8c237a9785}{IMG\_ERROR\_ALLOCATION}}\ =\ 0b0000000000000010,}
\DoxyCodeLine{00027\ \ \ \ \ \mbox{\hyperlink{Image_8h_a9ce7003c2ba4ec8cebb8f0c0bb503d64af801dcde64091a29268421b0a48c21e6}{IMG\_ERROR\_COPY}}\ =\ 0b0000000000000100,}
\DoxyCodeLine{00028\ \ \ \ \ \mbox{\hyperlink{Image_8h_a9ce7003c2ba4ec8cebb8f0c0bb503d64a8d7bde08de0c8a938b71c3f9ba9245bc}{IMG\_ERROR\_BIND}}\ =\ 0b0000000000001000,}
\DoxyCodeLine{00029\ \ \ \ \ \mbox{\hyperlink{Image_8h_a9ce7003c2ba4ec8cebb8f0c0bb503d64ae17caa19bb70e6833d92e5a09a0305fe}{IMG\_ERROR\_TYPE}}\ =\ 0b0000000000010000,\ \textcolor{comment}{//\ this\ can\ be\ used\ later\ when\ certain\ formats\ and\ layouts\ are\ expected\ for\ different\ types\ of\ images}}
\DoxyCodeLine{00030\ \ \ \ \ \mbox{\hyperlink{Image_8h_a9ce7003c2ba4ec8cebb8f0c0bb503d64ad3a9beb68c89a781c1898b5dfa828704}{IMG\_ERROR\_LOAD}}\ =\ 0b0000000000100000,}
\DoxyCodeLine{00031\ \ \ \ \ \mbox{\hyperlink{Image_8h_a9ce7003c2ba4ec8cebb8f0c0bb503d64ae94e40c205761bfb1db1f6ce0190c55c}{IMG\_ERROR\_VIEW\_CREATION}}\ =\ 0b0000000001000000,\ }
\DoxyCodeLine{00032\ \ \ \ \ \mbox{\hyperlink{Image_8h_a9ce7003c2ba4ec8cebb8f0c0bb503d64a25670ed665f8e532c999dac9262cd62d}{IMG\_ERROR\_SAMPLER\_CREATION}}\ =\ 0b0000000010000000}
\DoxyCodeLine{00033\ \};}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00035\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classImage_a0f320cc3b99b37fa1198ced3a711f988}{Image}}\ \{}
\DoxyCodeLine{00036\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00037\ \ \ \ \ \mbox{\hyperlink{classImage_a0f320cc3b99b37fa1198ced3a711f988}{Image}}(VkDevice\ logicalDevice,\ VkPhysicalDevice\ physicalDevice);}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classImage_aa20eefa89162e4d62840159755bc7772}{cleanup}}()\ \{}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}Cleaned\ up\ image:\ "{}}\ <<\ image\ <<\ \textcolor{stringliteral}{"{}\ successfully"{}}\ <<\ std::endl;}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (imageSampler\ !=\ VK\_NULL\_HANDLE)\ \{}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \ \ \ \ vkDestroySampler(imageLogicalDevice,\ imageSampler,\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \ \ \ \ imageSampler\ =\ VK\_NULL\_HANDLE;}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (imageDetails.imageView\ !=\ VK\_NULL\_HANDLE)\ \{}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \ \ \ \ vkDestroyImageView(imageLogicalDevice,\ imageDetails.imageView,\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \ \ \ \ imageDetails.imageView\ =\ VK\_NULL\_HANDLE;}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (image\ !=\ VK\_NULL\_HANDLE)\ \{}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \ \ \ \ vkDestroyImage(imageLogicalDevice,\ image,\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ \ \ \ \ image\ =\ VK\_NULL\_HANDLE;}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (imageMemory\ !=\ VK\_NULL\_HANDLE)\ \{}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \ \ \ \ vkFreeMemory(imageLogicalDevice,\ imageMemory,\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \ \ \ \ imageMemory\ =\ VK\_NULL\_HANDLE;}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00061\ \ \ \ \ \}}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00063\ \ \ \ \ \textcolor{comment}{//This\ function\ will\ fully\ create\ a\ texture\ image\ from\ the\ main\ script}}
\DoxyCodeLine{00064\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classImage_a856bd5d39f67fde7cda6d923ed9348ca}{createTextureImage}}(}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}*\ pixels,}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ texWidth,\ }
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ texHeight,\ }
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ std::string\ texturePath,\ }
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ VkCommandPool\ commandPool,\ }
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ std::shared\_ptr<Buffer>\ stagingBuf,\ }
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ std::shared\_ptr<BufferManager>\ bufferManager}
\DoxyCodeLine{00072\ \ \ \ \ );}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ \ \ \ \ \textcolor{comment}{//This\ functions\ will\ full\ create\ a\ depth\ image\ from\ the\ main\ script}}
\DoxyCodeLine{00075\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classImage_a61aed9dd2df48a92395ee1690f47802a}{createDepthImage}}(VkExtent2D\ renderTargetExtent);}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classImage_ab1bd7869124db979049472d8699907f3}{createImage}}(uint32\_t\ width,\ uint32\_t\ height,}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ VkImageTiling\ imageTiling,}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ VkImageUsageFlags\ usage,}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ VkMemoryPropertyFlags\ properties}
\DoxyCodeLine{00081\ \ \ \ \ );}
\DoxyCodeLine{00082\ }
\DoxyCodeLine{00083\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classImage_a96452c97c171496d43f25fd8aa998c67}{transitionImageLayout}}(VkImageLayout\ newLayout,\ VkCommandPool\ commandPool,\ std::shared\_ptr<BufferManager>\ bufferManager);}
\DoxyCodeLine{00084\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classImage_ae0fa8d3ba6c7a30a97487704498e2930}{copyBufferToImage}}(VkBuffer\ buffer,\ VkCommandPool\ commandPool,\ std::shared\_ptr<BufferManager>\ bufferManager);}
\DoxyCodeLine{00085\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classImage_ad71715e30a180cda12ac052d2822cebe}{createImageView}}();}
\DoxyCodeLine{00086\ }
\DoxyCodeLine{00087\ \ \ \ \ \textcolor{comment}{//Specific\ texture\ image\ util\ functions}}
\DoxyCodeLine{00088\ }
\DoxyCodeLine{00089\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classImage_acc10ae4ce5844e78a43d2cb0090aa706}{createTextureSampler}}();}
\DoxyCodeLine{00090\ }
\DoxyCodeLine{00091\ \ \ \ \ \textcolor{comment}{//Specific\ depth\ image\ util\ functions}}
\DoxyCodeLine{00092\ }
\DoxyCodeLine{00093\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classImage_a797e2f900fe22d28dcfbd003a95a647d}{printErrors}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00094\ }
\DoxyCodeLine{00095\ \ \ \ \ \textcolor{comment}{//Getter\ functions\ (these\ are\ called\ from\ imageManager-\/\ which\ should\ be\ exposed\ to\ the\ main\ script)}}
\DoxyCodeLine{00096\ \ \ \ \ VkSampler\ \mbox{\hyperlink{classImage_a2fba99403244beec2746e1785a7d267a}{getSampler}}()\ \{\ \textcolor{keywordflow}{return}\ imageSampler;\ \};}
\DoxyCodeLine{00097\ \ \ \ \ VkImage\ \mbox{\hyperlink{classImage_a5717dca652f9b44e2ccd93377adef6c1}{getImage}}()\ \{\ \textcolor{keywordflow}{return}\ image;\ \};}
\DoxyCodeLine{00098\ \ \ \ \ \mbox{\hyperlink{structImageDetails}{ImageDetails}}\ \mbox{\hyperlink{classImage_a99d09336630e44cba1225a123c42d92a}{getImageDetails}}()\ \{\ \textcolor{keywordflow}{return}\ imageDetails;\ \};}
\DoxyCodeLine{00099\ }
\DoxyCodeLine{00100\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00101\ \ \ \ \ \textcolor{comment}{//Injected\ Vulkan\ Core\ components}}
\DoxyCodeLine{00102\ \ \ \ \ VkDevice\ imageLogicalDevice;\ }
\DoxyCodeLine{00103\ \ \ \ \ VkPhysicalDevice\ imagePhysicalDevice;}
\DoxyCodeLine{00104\ \ \ \ \ \textcolor{comment}{//TODO\ -\/>\ FIX\ THE\ SWAPCHAIN\ FORWARD\ DECLARATIONS}}
\DoxyCodeLine{00105\ \ \ \ \ \textcolor{comment}{//\ CLASS\ IS\ CALLED\ "{}RENDERTARGETER"{}\ NOW\ **}}
\DoxyCodeLine{00106\ \ \ \ \ \textcolor{comment}{//\ and\ remember\ to\ add\ resources\ to\ build\ folder,\ or\ figure\ out\ whats\ up\ with\ that}}
\DoxyCodeLine{00107\ \ \ \ \ std::shared\_ptr<RenderTargeter>\ imageSwapchain;}
\DoxyCodeLine{00108\ \ \ \ \ \textcolor{comment}{//Injected\ custom\ managers}}
\DoxyCodeLine{00109\ \ \ \ \ std::shared\_ptr<BufferManager>\ imageBufferManager;}
\DoxyCodeLine{00110\ }
\DoxyCodeLine{00111\ \ \ \ \ \textcolor{comment}{//Main\ variables}}
\DoxyCodeLine{00112\ \ \ \ \ VkImage\ image;\ }
\DoxyCodeLine{00113\ \ \ \ \ VkDeviceMemory\ imageMemory;\ }
\DoxyCodeLine{00114\ \ \ \ \ \mbox{\hyperlink{structImageDetails}{ImageDetails}}\ imageDetails;\ }
\DoxyCodeLine{00115\ }
\DoxyCodeLine{00116\ \ \ \ \ VkSampler\ imageSampler\ =\ VK\_NULL\_HANDLE;}
\DoxyCodeLine{00117\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}\ imageErrors\ =\ \mbox{\hyperlink{Image_8h_a9ce7003c2ba4ec8cebb8f0c0bb503d64a37b8f5b833b8b9801b9a2e8337cf54cd}{IMG\_ERROR\_NONE}};\ }
\DoxyCodeLine{00118\ \};}
\DoxyCodeLine{00119\ }
\DoxyCodeLine{00120\ \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
